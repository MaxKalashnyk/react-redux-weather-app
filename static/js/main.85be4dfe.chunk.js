(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(37)},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),i=a.n(c),s=(a(29),a(1)),o=a(2),u=a(5),l=a(3),m=a(4),d=a(6),p=a(12),f=a(20),h=a.n(f),v=a(23),y=a(10),b=a(7),E={unit:localStorage.getItem("unit")?JSON.parse(localStorage.getItem("unit")):"Metric"};var O={place:"Kyiv",placeId:"",formattedPlace:"",isFavourite:!1};var j={color:localStorage.getItem("themeColor")?JSON.parse(localStorage.getItem("themeColor")):"dark"};var g="c1bfe9b98646ae15af74164518f99538",L=function(e){if(e)return"01d"===e||"01n"===e?"day-forecast-weather-sunny":"02d"===e||"02n"===e?"day-forecast-weather-cloudy-small":"03d"===e||"04d"===e||"50d"===e||"03n"===e||"04n"===e||"50n"===e?"day-forecast-weather-cloudy":"09d"===e||"09n"===e?"day-forecast-weather-shower-rain":"10d"===e||"10n"===e?"day-forecast-weather-rain":"11d"===e||"11n"===e?"day-forecast-weather-thunder":"13d"===e||"13n"===e?"day-forecast-weather-snow":""},N=function(){return"_"+Math.random().toString(36).substr(2,9)},k=["dark","blue","yellow"],F=[{name:"Metric",degreesUnit:"\xb0C"},{name:"Imperial",degreesUnit:"\xb0F"}],S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";return new Intl.DateTimeFormat("en-US",{weekday:t}).format(1e3*e)},I=function(e,t){if(e)return"Metric"===t?"".concat(Math.round(e)," \xb0C"):"".concat(Math.round(1.8*e+32)," \xb0F")},C=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"getWeatherURLS",value:function(e,t){return"".concat(e).concat(t,"&appid=").concat(g,"&units=metric")}},{key:"getWeatherData",value:function(e){var t=[this.getWeatherURLS("https://api.openweathermap.org/data/2.5/weather?q=",e),this.getWeatherURLS("https://api.openweathermap.org/data/2.5/forecast?q=",e)];return Promise.all(t.map(function(e){return fetch(e)})).then(function(e){return Promise.all(e.map(function(e){return e.json()}))})}},{key:"getForecast",value:function(e,t){var a="".concat(e).concat(t,"&appid=").concat(g,"&units=metric");return fetch(a).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}}]),e}(),w="REQUEST",T="REQUEST_SUCCESS",D="REQUEST_FAIL",_=function(e){return function(t){t({type:w}),(new C).getWeatherData(e).then(function(e){t({type:T,payload:e})}).catch(function(e){t({type:D,payload:e,error:!0})})}},R={data:null,isFetching:!1};var P={currentForecastData:null};var A={data:localStorage.getItem("historyList")?JSON.parse(localStorage.getItem("historyList")):[]};var U={data:localStorage.getItem("favouritesList")?JSON.parse(localStorage.getItem("favouritesList")):[]};var H=Object(y.c)({unit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UNIT":return localStorage.setItem("unit",JSON.stringify(t.payload)),Object(b.a)({},e,{unit:t.payload});default:return e}},place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLACE":return Object.assign(Object(b.a)({},e),t.payload);default:return e}},color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_THEME_COLOR":return localStorage.setItem("themeColor",JSON.stringify(t.payload)),Object(b.a)({},e,{color:t.payload});default:return e}},forecastData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(b.a)({},e,{isFetching:!0});case T:return Object(b.a)({},e,{isFetching:!1,data:t.payload});case D:return Object(b.a)({},e,{isFetching:!1,data:null});default:return e}},currentForecastData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_FORECAST":return Object(b.a)({},e,{currentForecastData:t.payload});default:return e}},historyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HISTORY_LIST":return localStorage.setItem("historyList",JSON.stringify(t.payload)),Object(b.a)({},e,{data:t.payload});default:return e}},favouritesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FAVOURITES_LIST":return localStorage.setItem("favouritesList",JSON.stringify(t.payload)),Object(b.a)({},e,{data:t.payload});default:return e}}}),x=a(21),M=a.n(x),J=a(22),W=Object(y.d)(H,Object(y.a)(J.a,M.a)),B=function(e){return{type:"UPDATE_FAVOURITES_LIST",payload:e}},Q=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"checkPlaceInFavouritesList",value:function(e){var t=this.props,a=t.favouritesList,r=t.updateButtonClass;if(a.find(function(t){return t.placeId===e.placeId})){var n=Object.assign(e,{isFavourite:!1}),c=a.filter(function(t){return t.placeId!==e.placeId});W.dispatch(B(c)),r(n)}else{r(Object.assign(e,{isFavourite:!0})),e.isFavourite=void 0,a.push(e);var i=Object(v.a)(a);W.dispatch(B(i))}}},{key:"render",value:function(){var e=this,t=this.props.place,a=t.isFavourite?"add-to-favourite-active":"";return n.a.createElement("button",{className:"add-to-favourite ".concat(a),onClick:function(){return e.checkPlaceInFavouritesList(t)}})}}]),t}(r.Component),q=Object(d.b)(function(e){return{favouritesList:e.favouritesList.data,place:e.place}})(Q),V=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplateList",value:function(){return F.map(function(e){var t=e.name,a=e.degreesUnit;return n.a.createElement("option",{value:t,key:N()},a)})}},{key:"switchUnit",value:function(e){var t=e.target.value;W.dispatch({type:"SET_UNIT",payload:t})}},{key:"render",value:function(){return n.a.createElement("select",{className:"temperature-units",onChange:this.switchUnit},this.renderTemplateList())}}]),t}(r.Component),Y=function(e){return{type:"SET_PLACE",payload:e}},G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).getDataStatusCode=function(e){return e.data?e.data[0].cod.toString():null},a.inputRef=n.a.createRef(),a.checkPlaceInHistoryList=a.checkPlaceInHistoryList.bind(Object(p.a)(a)),a.placeInfo={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"checkPlaceInHistoryList",value:function(e){var t=this.props.historyList;t.find(function(t){return t.placeId===e.placeId})||(t.push(e),this.props.handleHistoryList(t))}},{key:"checkPlaceInFavouritesList",value:function(e){if(this.props.favouritesList.find(function(t){return t.placeId===e.placeId})){var t=Object.assign(e,{isFavourite:!0});this.props.place(t)}else{var a=Object.assign(e,{isFavourite:!1});this.props.place(a)}}},{key:"performSearch",value:function(e){var t=e.formatted_address.split(",")[0];this.props.handleForecastData(t),this.props.handleCurrentForecastData(null);var a=e.formatted_address,r=e.place_id,n={place:e.address_components[0].long_name,formattedPlace:a,placeId:r};this.checkPlaceInHistoryList(n),this.checkPlaceInFavouritesList(n),this.inputRef.current.refs.input.value=""}},{key:"render",value:function(){var e=this.props.setPlaceAction;return n.a.createElement("div",{className:"search-block"},n.a.createElement(q,{place:this.placeInfo,updateButtonClass:e}),n.a.createElement(h.a,{className:"main-search-input",onPlaceSelected:this.performSearch.bind(this),autoFocus:!0,ref:this.inputRef}),n.a.createElement(V,null))}}]),t}(r.Component),K=Object(d.b)(function(e){return{historyList:e.historyList.data,favouritesList:e.favouritesList.data}},function(e){return{setPlaceAction:function(t){return e(Y(t))}}})(G),z=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplate",value:function(){var e,t,a,r=this.props.forecastData,c=r.name,i=r.dt,s=r.main,o=r.wind,u=r.weather,l=this.props.unit,m="weather-icon-current ".concat(L(u[0].icon));return n.a.createElement("div",{className:"forecast-current"},n.a.createElement("div",{className:"city-name"},c),n.a.createElement("div",{className:"forecast-details"},n.a.createElement("div",{className:"forecast-item"},n.a.createElement("div",{className:"forecast-item-text forecast-item-text-day"},S(i)),n.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-date"},function(e){if(e){var t=new Date(e);return new Intl.DateTimeFormat("en-GB").format(1e3*t)}}(i)),n.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-pressure"},"".concat((a=s.pressure)?Math.round(.75006*a):""," mm Hg")),n.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-wind"},"".concat((e=o.speed,e?"C"===t?"".concat(e.toFixed(1)," m/s"):"".concat((2.2369*e).toFixed(1)," mph"):""),", ").concat(function(e){var t="";return e?(e<=22.5||e>337.5&&e<=360?t="North":e>22.5&&e<67.5?t="North-East":e>67.5&&e<112.5?t="East":e>112.5&&e<157.5?t="South-East":e>157.5&&e<202.5?t="South":e>202.5&&e<247.5?t="South-West":e>247.5&&e<292.5?t="West":e>292.5&&e<337.5&&(t="North-West"),t):""}(o.deg))),n.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-humidity"},n.a.createElement("span",{className:"humidity-icon"}),s.humidity," %")),n.a.createElement("div",{className:"forecast-item"},n.a.createElement("div",{className:m}),n.a.createElement("div",{className:"weather-icon-description"},u[0].description)),n.a.createElement("div",{className:"forecast-item"},n.a.createElement("div",{className:"forecast-item-temps"},n.a.createElement("div",{className:"temp-min"},I(s.temp_min,l)),n.a.createElement("div",{className:"temp-max"},I(s.temp_max,l))),n.a.createElement("div",{className:"forecast-item-tempcurrent"},I(s.temp,l)))))}},{key:"render",value:function(){return this.renderTemplate()}}]),t}(r.Component),X=Object(d.b)(function(e){return console.log(e),{unit:e.unit.unit}})(z),Z=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.forecastData,r=t.unit,c="day-forecast-weather ".concat(L(a.weather[0].icon));return n.a.createElement("div",{className:"forecast-nearest-day-item",onClick:function(){return e.props.updateHandler(a)}},n.a.createElement("h3",{className:"day-title"},function(e){if(e){var t=e.split(" ")[0].split("-");return"".concat(t[2],"/").concat(t[1])}}(a.dt_txt)),n.a.createElement("div",{className:"day-forecast-dayname"},S(a.dt,"short")),n.a.createElement("div",{className:"day-forecast-temp"},I(a.main.temp,r)),n.a.createElement("div",{className:c}))}}]),t}(r.Component),$=Object(d.b)(function(e){return{unit:e.unit.unit}})(Z),ee=function(e){return{type:"CURRENT_FORECAST",payload:e}},te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplate",value:function(){var e=this.props,t=e.data,a=e.isFetching,r=e.place,c=e.currentForecast,i=e.setCurrentForecast,s=c.currentForecastData,o=t?+t[0].cod:null,u=t&&200===o?function(e){var t=[];return[3,11,19,27,35].forEach(function(a){t.push(e[a])}),t}(t[1].list):null,l=u?u.map(function(e){return n.a.createElement($,{forecastData:e,place:r.place,key:N(),updateHandler:i})}):"";return a?n.a.createElement("p",{className:"loading"},"Loading..."):n.a.createElement("div",{className:"search-results-container"},s?function(){var e={name:r},t=Object.assign(s,e);return t?n.a.createElement(X,{forecastData:t||null}):""}():t?o<=400?n.a.createElement(X,{forecastData:t?t[0]:null}):404===o?n.a.createElement("p",null,"City not found!"):n.a.createElement("p",null,"There is some problems with API"):"",t&&o<=400?n.a.createElement("div",{className:"forecast-nearest-days"},l):"")}},{key:"render",value:function(){return this.renderTemplate()}}]),t}(r.Component),ae=Object(d.b)(function(e){return{currentForecast:e.currentForecastData}},function(e){return{setCurrentForecast:function(t){return e(ee(t))}}})(te),re=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateForecast",value:function(){var e=this.props.place,t=e.place;W.dispatch(_(t)),this.checkPlaceInFavouritesList(e)}},{key:"checkPlaceInFavouritesList",value:function(e){if(this.props.favouritesList.find(function(t){return t.placeId===e.placeId})){var t=Object.assign(e,{isFavourite:!0});W.dispatch(Y(t))}else{var a=Object.assign(e,{isFavourite:!1});W.dispatch(Y(a))}}},{key:"render",value:function(){var e=this.props.place.formattedPlace;return n.a.createElement("li",{className:"user-activity-list-item",onClick:this.updateForecast.bind(this)},e)}}]),t}(r.Component),ne=Object(d.b)(function(e){return{favouritesList:e.favouritesList.data}})(re),ce=function(e){return{type:"UPDATE_HISTORY_LIST",payload:e}},ie=a(13),se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).historyListRef=n.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){new ie.a(this.historyListRef.current)}},{key:"renderHistoryItemsList",value:function(){return this.props.historyList.map(function(e){return n.a.createElement(ne,{place:e,key:N()})})}},{key:"clearHistoryList",value:function(){W.dispatch(ce([]))}},{key:"render",value:function(){return n.a.createElement("div",{className:"user-activity-item"},n.a.createElement("div",{className:"user-activity-header"},n.a.createElement("h3",{className:"user-activity-title user-activity-title-history"},"recently viewed"),n.a.createElement("button",{className:"remove-button",onClick:this.clearHistoryList})),n.a.createElement("div",{className:"user-activity-content"},n.a.createElement("ul",{className:"user-activity-list",ref:this.historyListRef},this.renderHistoryItemsList())))}}]),t}(r.Component),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).favouritesListRef=n.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){new ie.a(this.favouritesListRef.current)}},{key:"renderFavouritesList",value:function(){return this.props.favouritesList.map(function(e){return n.a.createElement(ne,{place:e,key:N()})})}},{key:"clearFavouritesList",value:function(){W.dispatch(B([]))}},{key:"render",value:function(){return n.a.createElement("div",{className:"user-activity-item"},n.a.createElement("div",{className:"user-activity-header"},n.a.createElement("h3",{className:"user-activity-title user-activity-title-fav"},"favourite"),n.a.createElement("button",{className:"remove-button",onClick:this.clearFavouritesList})),n.a.createElement("div",{className:"user-activity-content"},n.a.createElement("ul",{className:"user-activity-list",ref:this.favouritesListRef},this.renderFavouritesList())))}}]),t}(r.Component),ue=(a(35),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"changeColorThemeHandler",value:function(e){var t=e.target.value;W.dispatch({type:"SET_THEME_COLOR",payload:t})}},{key:"renderTemplate",value:function(){var e=this,t=this.props.themeColor;return k.map(function(a){return n.a.createElement("div",{className:"color-switcher__item",key:N()},n.a.createElement("label",{className:"color-switcher-label"},n.a.createElement("input",{type:"radio",name:"color",value:a,className:"color-switcher-input hidden-input",onChange:e.changeColorThemeHandler.bind(e),checked:a===t}),n.a.createElement("span",{className:"color-switcher-name"},a)))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"color-switcher"},n.a.createElement("p",null,"Choose color theme: "),this.renderTemplate())}}]),t}(r.Component)),le=Object(d.b)(function(e){return{themeColor:e.color.color}})(ue),me=(a(36),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setPlaceAction,a=e.getForecastDataAction,r=e.forecastData,c=e.place,i=e.setCurrentForecastAction,s=e.themeColor,o=e.updateHistoryListAction,u=e.historyList,l=e.favouritesList;return n.a.createElement("div",{className:"App ".concat(s)},n.a.createElement("main",{className:"main"},n.a.createElement("div",{className:"app-container"},n.a.createElement("h1",{className:"main-title"},"Weather application"),n.a.createElement(le,null),n.a.createElement(K,{handleForecastData:a,handleCurrentForecastData:i,handleHistoryList:o,place:t}),n.a.createElement(ae,{data:r.data,isFetching:r.isFetching,place:c}),n.a.createElement("div",{className:"user-activity-wrap"},n.a.createElement(oe,{favouritesList:l}),n.a.createElement(se,{historyList:u})))))}}]),t}(r.Component)),de=Object(d.b)(function(e){return{themeColor:e.color.color,forecastData:e.forecastData,place:e.place.place,historyList:e.historyList.data,favouritesList:e.favouritesList.data}},function(e){return{setPlaceAction:function(t){return e(Y(t))},getForecastDataAction:function(t){return e(_(t))},setCurrentForecastAction:function(t){return e(ee(t))},updateHistoryListAction:function(t){return e(ce(t))}}})(me);i.a.render(n.a.createElement(d.a,{store:W},n.a.createElement(de,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.85be4dfe.chunk.js.map