(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(37)},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),s=(a(29),a(1)),o=a(2),u=a(4),l=a(3),m=a(5),p=a(6),d=a(12),f=a(20),h=a.n(f),v=a(23),y=a(10),b=a(7),O="SET_UNIT",j={unit:localStorage.getItem("unit")?JSON.parse(localStorage.getItem("unit")):"Metric"};var E="SET_PLACE",g=function(e){return{type:E,payload:e}},L={place:"Kyiv",placeId:"",formattedPlace:"",isFavourite:!1};var N="SET_THEME_COLOR",k={color:localStorage.getItem("themeColor")?JSON.parse(localStorage.getItem("themeColor")):"dark"};var F="c1bfe9b98646ae15af74164518f99538",I=function(e){if(e)return"01d"===e||"01n"===e?"day-forecast-weather-sunny":"02d"===e||"02n"===e?"day-forecast-weather-cloudy-small":"03d"===e||"04d"===e||"50d"===e||"03n"===e||"04n"===e||"50n"===e?"day-forecast-weather-cloudy":"09d"===e||"09n"===e?"day-forecast-weather-shower-rain":"10d"===e||"10n"===e?"day-forecast-weather-rain":"11d"===e||"11n"===e?"day-forecast-weather-thunder":"13d"===e||"13n"===e?"day-forecast-weather-snow":""},w=function(){return"_"+Math.random().toString(36).substr(2,9)},C=["dark","blue","yellow"],S=[{name:"Metric",degreesUnit:"\xb0C"},{name:"Imperial",degreesUnit:"\xb0F"}],T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";return new Intl.DateTimeFormat("en-US",{weekday:t}).format(1e3*e)},D=function(e,t){if(e)return"Metric"===t?"".concat(Math.round(e)," \xb0C"):"".concat(Math.round(1.8*e+32)," \xb0F")},P=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"getWeatherURLS",value:function(e,t){return"".concat(e).concat(t,"&appid=").concat(F,"&units=metric")}},{key:"getWeatherData",value:function(e){var t=[this.getWeatherURLS("https://api.openweathermap.org/data/2.5/weather?q=",e),this.getWeatherURLS("https://api.openweathermap.org/data/2.5/forecast?q=",e)];return Promise.all(t.map(function(e){return fetch(e)})).then(function(e){return Promise.all(e.map(function(e){return e.json()}))})}},{key:"getForecast",value:function(e,t){var a="".concat(e).concat(t,"&appid=").concat(F,"&units=metric");return fetch(a).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}}]),e}(),R="REQUEST",_="REQUEST_SUCCESS",x="REQUEST_FAIL",A=function(e){return function(t){t({type:R}),(new P).getWeatherData(e).then(function(e){t({type:_,payload:e})}).catch(function(e){t({type:x,payload:e,error:!0})})}},U={data:null,isFetching:!1};var H="CURRENT_FORECAST",M=function(e){return{type:H,payload:e}},J={currentForecastData:null};var W="UPDATE_HISTORY_LIST",B=function(e){return{type:W,payload:e}},Q={data:localStorage.getItem("historyList")?JSON.parse(localStorage.getItem("historyList")):[]};var q="UPDATE_FAVOURITES_LIST",V=function(e){return{type:"UPDATE_FAVOURITES_LIST",payload:e}},G={data:localStorage.getItem("favouritesList")?JSON.parse(localStorage.getItem("favouritesList")):[]};var K=Object(y.c)({unit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return localStorage.setItem("unit",JSON.stringify(t.payload)),Object(b.a)({},e,{unit:t.payload});default:return e}},place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object.assign(Object(b.a)({},e),t.payload);default:return e}},color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return localStorage.setItem("themeColor",JSON.stringify(t.payload)),Object(b.a)({},e,{color:t.payload});default:return e}},forecastData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(b.a)({},e,{isFetching:!0});case _:return Object(b.a)({},e,{isFetching:!1,data:t.payload});case x:return Object(b.a)({},e,{isFetching:!1,data:null});default:return e}},currentForecastData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(b.a)({},e,{currentForecastData:t.payload});default:return e}},historyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return localStorage.setItem("historyList",JSON.stringify(t.payload)),Object(b.a)({},e,{data:t.payload});default:return e}},favouritesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return localStorage.setItem("favouritesList",JSON.stringify(t.payload)),Object(b.a)({},e,{data:t.payload});default:return e}}}),Y=a(21),z=a.n(Y),X=a(22),Z=Object(y.d)(K,Object(y.a)(X.a,z.a)),$=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"checkPlaceInFavouritesList",value:function(e){var t=this.props,a=t.favouritesList,n=t.updateButtonClass;if(a.find(function(t){return t.placeId===e.placeId})){var r=Object.assign(e,{isFavourite:!1}),c=a.filter(function(t){return t.placeId!==e.placeId});Z.dispatch(V(c)),n(r)}else{n(Object.assign(e,{isFavourite:!0})),e.isFavourite=void 0,a.push(e);var i=Object(v.a)(a);Z.dispatch(V(i))}}},{key:"render",value:function(){var e=this,t=this.props.place,a=t.isFavourite?"add-to-favourite-active":"";return r.a.createElement("button",{className:"add-to-favourite ".concat(a),onClick:function(){return e.checkPlaceInFavouritesList(t)}})}}]),t}(n.Component),ee=Object(p.b)(function(e){return{favouritesList:e.favouritesList.data,place:e.place}})($),te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplateList",value:function(){return S.map(function(e){var t=e.name,a=e.degreesUnit;return r.a.createElement("option",{value:t,key:w()},a)})}},{key:"switchUnit",value:function(e){var t=e.target.value;Z.dispatch({type:O,payload:t})}},{key:"render",value:function(){return r.a.createElement("select",{className:"temperature-units",onChange:this.switchUnit},this.renderTemplateList())}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).getDataStatusCode=function(e){return e.data?e.data[0].cod.toString():null},a.inputRef=r.a.createRef(),a.checkPlaceInHistoryList=a.checkPlaceInHistoryList.bind(Object(d.a)(a)),a.placeInfo={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"checkPlaceInHistoryList",value:function(e){var t=this.props.historyList;t.find(function(t){return t.placeId===e.placeId})||(t.push(e),this.props.handleHistoryList(t))}},{key:"checkPlaceInFavouritesList",value:function(e){if(this.props.favouritesList.find(function(t){return t.placeId===e.placeId})){var t=Object.assign(e,{isFavourite:!0});this.props.place(t)}else{var a=Object.assign(e,{isFavourite:!1});this.props.place(a)}}},{key:"performSearch",value:function(e){var t=e.formatted_address.split(",")[0];this.props.handleForecastData(t),this.props.handleCurrentForecastData(null);var a=e.formatted_address,n=e.place_id,r={place:e.address_components[0].long_name,formattedPlace:a,placeId:n};this.checkPlaceInHistoryList(r),this.checkPlaceInFavouritesList(r),this.inputRef.current.refs.input.value=""}},{key:"render",value:function(){var e=this.props.setPlaceAction;return r.a.createElement("div",{className:"search-block"},r.a.createElement(ee,{place:this.placeInfo,updateButtonClass:e}),r.a.createElement(h.a,{className:"main-search-input",onPlaceSelected:this.performSearch.bind(this),autoFocus:!0,ref:this.inputRef}),r.a.createElement(te,null))}}]),t}(n.Component),ne=Object(p.b)(function(e){return{historyList:e.historyList.data,favouritesList:e.favouritesList.data}},function(e){return{setPlaceAction:function(t){return e(g(t))}}})(ae),re=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.setPlaceAction,a=e.getForecastDataAction,n=e.setCurrentForecastAction,c=e.updateHistoryListAction;return r.a.createElement(ne,{handleForecastData:a,handleCurrentForecastData:n,handleHistoryList:c,place:t})}}]),t}(r.a.Component),ce=Object(p.b)(function(e){return{page:e.page}},function(e){return{setPlaceAction:function(t){return e(g(t))},getForecastDataAction:function(t){return e(A(t))},setCurrentForecastAction:function(t){return e(M(t))},updateHistoryListAction:function(t){return e(B(t))}}})(re),ie=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplate",value:function(){var e,t,a,n=this.props.forecastData,c=n.name,i=n.dt,s=n.main,o=n.wind,u=n.weather,l=this.props.unit,m="weather-icon-current ".concat(I(u[0].icon));return r.a.createElement("div",{className:"forecast-current"},r.a.createElement("div",{className:"city-name"},c),r.a.createElement("div",{className:"forecast-details"},r.a.createElement("div",{className:"forecast-item"},r.a.createElement("div",{className:"forecast-item-text forecast-item-text-day"},T(i)),r.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-date"},function(e){if(e){var t=new Date(e);return new Intl.DateTimeFormat("en-GB").format(1e3*t)}}(i)),r.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-pressure"},"".concat((a=s.pressure)?Math.round(.75006*a):""," mm Hg")),r.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-wind"},"".concat((e=o.speed,t=l,e?"Metric"===t?"".concat(e.toFixed(1)," m/s"):"".concat((2.2369*e).toFixed(1)," mph"):""),", ").concat(function(e){var t="";return e?(e<=22.5||e>337.5&&e<=360?t="North":e>22.5&&e<67.5?t="North-East":e>67.5&&e<112.5?t="East":e>112.5&&e<157.5?t="South-East":e>157.5&&e<202.5?t="South":e>202.5&&e<247.5?t="South-West":e>247.5&&e<292.5?t="West":e>292.5&&e<337.5&&(t="North-West"),t):""}(o.deg))),r.a.createElement("div",{className:"forecast-item-text forecast-item-text-icon forecast-item-text-icon-humidity"},r.a.createElement("span",{className:"humidity-icon"}),s.humidity," %")),r.a.createElement("div",{className:"forecast-item"},r.a.createElement("div",{className:m}),r.a.createElement("div",{className:"weather-icon-description"},u[0].description)),r.a.createElement("div",{className:"forecast-item"},r.a.createElement("div",{className:"forecast-item-temps"},r.a.createElement("div",{className:"temp-min"},D(s.temp_min,l)),r.a.createElement("div",{className:"temp-max"},D(s.temp_max,l))),r.a.createElement("div",{className:"forecast-item-tempcurrent"},D(s.temp,l)))))}},{key:"render",value:function(){return this.renderTemplate()}}]),t}(n.Component),se=Object(p.b)(function(e){return console.log(e),{unit:e.unit.unit}})(ie),oe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.forecastData,n=t.unit,c="day-forecast-weather ".concat(I(a.weather[0].icon));return r.a.createElement("div",{className:"forecast-nearest-day-item",onClick:function(){return e.props.updateHandler(a)}},r.a.createElement("h3",{className:"day-title"},function(e){if(e){var t=e.split(" ")[0].split("-");return"".concat(t[2],"/").concat(t[1])}}(a.dt_txt)),r.a.createElement("div",{className:"day-forecast-dayname"},T(a.dt,"short")),r.a.createElement("div",{className:"day-forecast-temp"},D(a.main.temp,n)),r.a.createElement("div",{className:c}))}}]),t}(n.Component),ue=Object(p.b)(function(e){return{unit:e.unit.unit}})(oe),le=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"renderTemplate",value:function(){var e=this.props,t=e.data,a=e.isFetching,n=e.place,c=e.currentForecast,i=e.setCurrentForecast,s=c.currentForecastData,o=t?+t[0].cod:null,u=t&&200===o?function(e){var t=[];return[3,11,19,27,35].forEach(function(a){t.push(e[a])}),t}(t[1].list):null,l=u?u.map(function(e){return r.a.createElement(ue,{forecastData:e,place:n.place,key:w(),updateHandler:i})}):"";return a?r.a.createElement("p",{className:"loading"},"Loading..."):r.a.createElement("div",{className:"search-results-container"},s?function(){var e={name:n},t=Object.assign(s,e);return t?r.a.createElement(se,{forecastData:t||null}):""}():t?o<=400?r.a.createElement(se,{forecastData:t?t[0]:null}):404===o?r.a.createElement("p",null,"City not found!"):r.a.createElement("p",null,"There is some problems with API"):"",t&&o<=400?r.a.createElement("div",{className:"forecast-nearest-days"},l):"")}},{key:"render",value:function(){return this.renderTemplate()}}]),t}(n.Component),me=Object(p.b)(function(e){return{currentForecast:e.currentForecastData}},function(e){return{setCurrentForecast:function(t){return e(M(t))}}})(le),pe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.forecastData,a=e.place;return r.a.createElement(me,{data:t.data,isFetching:t.isFetching,place:a})}}]),t}(r.a.Component),de=Object(p.b)(function(e){return{forecastData:e.forecastData,place:e.place.place}})(pe),fe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateForecast",value:function(){var e=this.props.place,t=e.place;Z.dispatch(A(t)),this.checkPlaceInFavouritesList(e)}},{key:"checkPlaceInFavouritesList",value:function(e){if(this.props.favouritesList.find(function(t){return t.placeId===e.placeId})){var t=Object.assign(e,{isFavourite:!0});Z.dispatch(g(t))}else{var a=Object.assign(e,{isFavourite:!1});Z.dispatch(g(a))}}},{key:"render",value:function(){var e=this.props.place.formattedPlace;return r.a.createElement("li",{className:"user-activity-list-item",onClick:this.updateForecast.bind(this)},e)}}]),t}(n.Component),he=Object(p.b)(function(e){return{favouritesList:e.favouritesList.data}})(fe),ve=a(13),ye=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).favouritesListRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){new ve.a(this.favouritesListRef.current)}},{key:"renderFavouritesList",value:function(){return this.props.favouritesList.map(function(e){return r.a.createElement(he,{place:e,key:w()})})}},{key:"clearFavouritesList",value:function(){Z.dispatch(V([]))}},{key:"render",value:function(){return r.a.createElement("div",{className:"user-activity-item"},r.a.createElement("div",{className:"user-activity-header"},r.a.createElement("h3",{className:"user-activity-title user-activity-title-fav"},"favourite"),r.a.createElement("button",{className:"remove-button",onClick:this.clearFavouritesList})),r.a.createElement("div",{className:"user-activity-content"},r.a.createElement("ul",{className:"user-activity-list",ref:this.favouritesListRef},this.renderFavouritesList())))}}]),t}(n.Component),be=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.favouritesList;return r.a.createElement(ye,{favouritesList:e})}}]),t}(r.a.Component),Oe=Object(p.b)(function(e){return{favouritesList:e.favouritesList.data}})(be),je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).historyListRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){new ve.a(this.historyListRef.current)}},{key:"renderHistoryItemsList",value:function(){return this.props.historyList.map(function(e){return r.a.createElement(he,{place:e,key:w()})})}},{key:"clearHistoryList",value:function(){Z.dispatch(B([]))}},{key:"render",value:function(){return r.a.createElement("div",{className:"user-activity-item"},r.a.createElement("div",{className:"user-activity-header"},r.a.createElement("h3",{className:"user-activity-title user-activity-title-history"},"recently viewed"),r.a.createElement("button",{className:"remove-button",onClick:this.clearHistoryList})),r.a.createElement("div",{className:"user-activity-content"},r.a.createElement("ul",{className:"user-activity-list",ref:this.historyListRef},this.renderHistoryItemsList())))}}]),t}(n.Component),Ee=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.historyList;return r.a.createElement(je,{historyList:e})}}]),t}(r.a.Component),ge=Object(p.b)(function(e){return{historyList:e.historyList.data}})(Ee),Le=(a(35),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"changeColorThemeHandler",value:function(e){var t=e.target.value;Z.dispatch({type:N,payload:t})}},{key:"renderTemplate",value:function(){var e=this,t=this.props.themeColor;return C.map(function(a){return r.a.createElement("div",{className:"color-switcher__item",key:w()},r.a.createElement("label",{className:"color-switcher-label"},r.a.createElement("input",{type:"radio",name:"color",value:a,className:"color-switcher-input hidden-input",onChange:e.changeColorThemeHandler.bind(e),checked:a===t}),r.a.createElement("span",{className:"color-switcher-name"},a)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"color-switcher"},r.a.createElement("p",null,"Choose color theme: "),this.renderTemplate())}}]),t}(n.Component)),Ne=Object(p.b)(function(e){return{themeColor:e.color.color}})(Le),ke=(a(36),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.themeColor;return r.a.createElement("div",{className:"App ".concat(e)},r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"app-container"},r.a.createElement("h1",{className:"main-title"},"Weather application"),r.a.createElement(Ne,null),r.a.createElement(ce,null),r.a.createElement(de,null),r.a.createElement("div",{className:"user-activity-wrap"},r.a.createElement(Oe,null),r.a.createElement(ge,null)))))}}]),t}(n.Component)),Fe=Object(p.b)(function(e){return{themeColor:e.color.color}})(ke);i.a.render(r.a.createElement(p.a,{store:Z},r.a.createElement(Fe,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.aaf5c0fe.chunk.js.map